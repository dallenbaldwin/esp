<!DOCTYPE html>
<html lang="en">
   <head>
      <link href="./src/favicon.ico" rel="icon" type="image/x-icon" />
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>ESP</title>
      <!-- CSS only -->
      <link
         rel="stylesheet"
         href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css"
         integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I"
         crossorigin="anonymous"
      />
      <link rel="stylesheet" href="./src/index.css" />
   </head>
   <body>
      <div class="container">
         <!-- for some reason toggling modals doesn't work in BS5 yet?? -->
         <button
            type="button"
            class="btn btn-primary d-none"
            data-toggle="modal"
            id="gameOverBtn"
            data-target="#gameOverModal"
         >
            Launch game over
         </button>
         <!-- end of the game modal -->
         <div
            class="modal fade"
            id="gameOverModal"
            data-backdrop="static"
            data-keyboard="false"
            tabindex="-1"
            aria-labelledby="gameOverModalLabel"
            aria-hidden="true"
         >
            <div class="modal-dialog modal-dialog-centered">
               <div class="modal-content" style="min-height: 400px">
                  <div class="modal-header">
                     <h5 class="modal-title" id="gameOverModalLabel">Game Over</h5>
                  </div>
                  <div class="modal-body" id="gameOverModalBody"></div>
                  <div class="modal-footer">
                     <button
                        type="button"
                        class="btn btn-primary btn-lg"
                        data-dismiss="modal"
                        onclick="startGame()"
                     >
                        Play Again
                     </button>
                     <button
                        type="button"
                        class="btn btn-warning btn-lg"
                        data-dismiss="modal"
                        onclick="resetTheGame()"
                     >
                        Exit
                     </button>
                  </div>
               </div>
            </div>
         </div>
         <!-- exit game modal -->
         <div
            class="modal fade"
            id="exitModal"
            data-backdrop="static"
            data-keyboard="false"
            tabindex="-1"
            aria-labelledby="exitModalLabel"
            aria-hidden="true"
         >
            <div class="modal-dialog modal-dialog-centered">
               <div class="modal-content" style="min-height: 400px">
                  <div class="modal-header">
                     <h5 class="modal-title" id="exitModalLabel">WAIT!</h5>
                  </div>
                  <div class="modal-body" id="exitModalBody">
                     <p>Are you sure you want to exit the game?</p>
                     <p>You may never know you have Extra Sensory Perception!</p>
                  </div>
                  <div class="modal-footer">
                     <button
                        type="button"
                        class="btn btn-primary btn-lg"
                        data-dismiss="modal"
                     >
                        Continue
                     </button>
                     <button
                        type="button"
                        class="btn btn-warning btn-lg"
                        data-dismiss="modal"
                        onclick="resetTheGame()"
                     >
                        Quit
                     </button>
                  </div>
               </div>
            </div>
         </div>
         <div class="row mt-2">
            <div class="col-sm text-center">
               <div id="cardBack">
                  <div class="c-card-border">
                     <div class="c-ghost">ðŸ‘»</div>
                     <h4 id="guessCount"></h4>
                     <h5 id="guessRatio"></h5>
                  </div>
               </div>
               <div id="cardFront">
                  <img
                     id="circle-card"
                     src="./assets/circle.svg"
                     alt="circle"
                     class="c-zener-card mx-auto"
                  />
                  <img
                     id="plus-card"
                     src="./assets/plus.svg"
                     alt="plus"
                     class="c-zener-card mx-auto"
                  />
                  <img
                     id="waves-card"
                     src="./assets/waves.svg"
                     alt="waves"
                     class="c-zener-card mx-auto"
                  />
                  <img
                     id="square-card"
                     src="./assets/square.svg"
                     alt="square"
                     class="c-zener-card mx-auto"
                  />
                  <img
                     id="star-card"
                     src="./assets/star.svg"
                     alt="star"
                     class="c-zener-card mx-auto"
                  />
               </div>
            </div>
         </div>
         <div class="row mt-1">
            <div class="col-sm">
               <div id="welcomeMessage">
                  <p>
                     ESP, or Extrasensory Perception, and whether you have it, is the goal
                     of this experiment.
                     <span id="vibrationErrorText"></span>
                  </p>
                  <h1>Are you ready?</h1>
               </div>
               <p id="messageSpace"></p>
            </div>
         </div>
         <div class="row mt-1">
            <div class="col-sm">
               <div class="text-center">
                  <button
                     id="startBtn"
                     type="button"
                     class="btn btn-primary btn-lg mx-auto"
                     onclick="startGame()"
                  >
                     Let us Begin
                  </button>
                  <button
                     id="continueBtn"
                     type="button"
                     class="btn btn-secondary btn-lg mx-auto"
                     onclick="continueGame()"
                  >
                     Continue
                  </button>
                  <button
                     id="exitBtn"
                     type="button"
                     class="btn btn-warning btn-lg mx-auto"
                     data-toggle="modal"
                     data-target="#exitModal"
                  >
                     Exit
                  </button>
               </div>
            </div>
         </div>
         <div id="cardBtnGroup" class="row mt-1">
            <div class="col-sm text-center">
               <img
                  src="./assets/circle.svg"
                  alt="circle"
                  class="c-zener-card-small c-clickable img-fluid"
               />
               <img
                  src="./assets/plus.svg"
                  alt="plus"
                  class="c-zener-card-small c-clickable img-fluid"
               />
               <img
                  src="./assets/waves.svg"
                  alt="waves"
                  class="c-zener-card-small c-clickable img-fluid"
               />
               <img
                  src="./assets/square.svg"
                  alt="square"
                  class="c-zener-card-small c-clickable img-fluid"
               />
               <img
                  src="./assets/star.svg"
                  alt="star"
                  class="c-zener-card-small c-clickable img-fluid"
               />
            </div>
         </div>
      </div>
      <audio src="./assets/notification.mp3" id="notificationSound"></audio>
      <!-- JavaScript and dependencies -->
      <script
         src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
         integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
         crossorigin="anonymous"
      ></script>
      <script
         src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js"
         integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/"
         crossorigin="anonymous"
      ></script>
      <script
         src="https://cdn.jsdelivr.net/npm/lodash@4.17.20/lodash.min.js"
         integrity="sha256-ur/YlHMU96MxHEsy3fHGszZHas7NzH4RQlD4tDVvFhw="
         crossorigin="anonymous"
      ></script>
      <!-- custom scripts -->
      <script src="./src/index.js"></script>
      <script>
         [...document.querySelectorAll('.c-zener-card-small')].forEach(card =>
            card.addEventListener('click', ZhuLi_DoTheThing)
         );
         let currentGuessCount = Number(DB.getItem('guessCount'));
         if (currentGuessCount > TOTALGUESS) {
            finishTheGame();
         } else if (currentGuessCount > 0) {
            setContinueState();
         } else {
            setBeginState();
         }
         updateGuesses();
      </script>
   </body>
</html>
